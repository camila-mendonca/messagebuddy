<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{base}">
<head>
<title>Conversations</title>
</head>

<body>

<div layout:fragment="page_content">
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h5 class="m-0">Public Conversations</h5>
		</div>
		<div class="card-body">
			<div class="list-group mb-3">
				
				<a th:each="c : ${conversations}" th:href="@{/user/loadconversation/{id}(id=${c.conversationId})}" class="list-group-item list-group-item-action">
					<div class="d-flex w-100 justify-content-between">
						<h5 class="mb-1"><span th:text="${c.subject}" ></span></h5>
					</div>
					<div th:if="${c.lastMessage != null}">
						<p class="mb-0">"<span th:text="${c.lastMessage.subject}"></span>"</p>
						<small class="text-muted">Sent on <span th:text="${#dates.format(c.lastMessage.dateSent, 'dd/MM/yyyy')}"></span> by <span th:text="${c.user.username}"></span> </small>
					</div>
					<div th:if="${c.lastMessage == null}">
						<small class="text-muted">No messages yet.</small>
					</div>
				</a>
				
			</div>

			<a class="btn btn-primary" th:href="@{/user/newconversation}" role="button">New Conversation</a>		
		
		</div>		
	</div>
</div>


</body>
</html>